import{_ as u}from"./supabase-215a852a.js";import{j as a}from"./ui-c2c9966d.js";import{c as m,r as h,a as w}from"./vendor-91e15b2e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}})();var d={},f=m;d.createRoot=f.createRoot,d.hydrateRoot=f.hydrateRoot;class y extends h.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,c){console.error("Uncaught error:",e,c)}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:a.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{children:"Something went wrong"}),a.jsx("p",{children:"The application encountered an unexpected error."}),a.jsx("div",{style:{background:"#f8f8f8",padding:"15px",borderRadius:"4px",fontFamily:"monospace",overflow:"auto"},children:((e=this.state.error)==null?void 0:e.message)||"Unknown error"}),a.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"8px 16px",background:"#6a51ae",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Application"})]}):this.props.children}}const b=200;typeof window<"u"&&!window.appLogs&&(window.appLogs=[]);const i=(t,e,c="info",r)=>{try{let o;c==="error"&&(o=new Error().stack);let n;try{r&&(r instanceof Error?n={message:r.message,stack:r.stack,name:r.name}:typeof r=="object"?n=JSON.stringify(r,null,2):n=String(r))}catch(p){n="Error formatting data: "+String(p)}const l={timestamp:new Date().toISOString(),component:t,message:e,type:c,data:n,stackTrace:o};switch(c){case"error":console.error(`[${t}]`,e,r);break;case"warning":console.warn(`[${t}]`,e,r);break;case"debug":console.debug(`[${t}]`,e,r);break;case"success":console.info(`%c[${t}] ${e}`,"color: green",r);break;case"info":default:console.info(`[${t}]`,e,r);break}if(typeof window<"u"){window.appLogs=[l,...window.appLogs].slice(0,b);const p=new CustomEvent("app-log-update",{detail:l});window.dispatchEvent(p)}}catch(o){console.error("Logging error:",o)}};let s=null;const x="ws://localhost:8081",g=()=>{s||(s=new WebSocket(x),s.onopen=()=>{console.log("Connected to activity WebSocket server")},s.onerror=t=>{console.error("Activity WebSocket error:",t)},s.onclose=()=>{console.log("Disconnected from activity WebSocket server"),s=null,setTimeout(g,5e3)})},L=t=>{s&&s.readyState===WebSocket.OPEN?s.send(JSON.stringify(t)):console.warn("WebSocket not open, activity not sent:",t)};console.log("main.tsx: Script executing");typeof window<"u"&&(window.appLog=i);typeof window<"u"&&(window.appLog=i);i("Main","Application initializing...","info");async function S(){try{i("Main","Starting application initialization...","info"),g();try{i("Main","Testing Supabase connection...","info"),await(await u(()=>import("./testSupabase-1cf4605e.js"),["assets/testSupabase-1cf4605e.js","assets/supabase-215a852a.js","assets/vendor-91e15b2e.js"])).testSupabaseConnection()?i("Main","Supabase connection test successful","success"):i("Main","Supabase connection test failed, but continuing with app initialization","warning")}catch(e){i("Main","Failed to test Supabase connection","error",e),i("Main","Continuing with app initialization despite Supabase test failure","warning")}i("Main","Loading App component...","info"),console.log("main.tsx: Loading App component...");const{default:t}=await u(()=>import("./App-49df8fbc.js").then(e=>e.A),["assets/App-49df8fbc.js","assets/ui-c2c9966d.js","assets/vendor-91e15b2e.js","assets/supabaseClient-510d7de7.js","assets/supabase-215a852a.js","assets/App-9f540b47.css"]);i("Main","App component loaded successfully","success"),console.log("main.tsx: App component loaded successfully"),i("Main","Rendering application to DOM...","info"),console.log("main.tsx: Rendering App into root..."),d.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(y,{children:a.jsx(t,{})})})),i("Main","Application rendering complete","success")}catch(t){i("Main","Failed to initialize application","error",t);const e=document.getElementById("root");e&&(e.innerHTML=`
        <div style="padding: 20px; font-family: sans-serif;">
          <h1 style="color: #d32f2f;">Application Error</h1>
          <p>The application failed to initialize. Please check the console for more details.</p>
          <div style="background: #f5f5f5; padding: 10px; border-radius: 4px; margin-top: 20px;">
            <strong>Error:</strong> ${t instanceof Error?t.message:"Unknown error"}
          </div>
          <button onclick="location.reload()" style="margin-top: 20px; padding: 8px 16px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Reload Application
          </button>
        </div>
      `)}}S();export{i as a,L as s};
